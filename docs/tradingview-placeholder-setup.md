# TradingView ä½”ä½ç¬¦è¨­å®šæŒ‡å—ï¼ˆç„¡éœ€ä¿®æ”¹ç­–ç•¥ï¼‰

æœ¬æŒ‡å—è®“æ‚¨å®Œå…¨é€é TradingView Alert çš„è¨Šæ¯è¨­å®šä¾†æ§åˆ¶äº¤æ˜“è¨Šè™Ÿï¼Œ**å®Œå…¨ä¸éœ€è¦ä¿®æ”¹ Pine Script ç­–ç•¥ç¨‹å¼ç¢¼**ã€‚

---

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

**å‚³çµ±æ–¹å¼ï¼š** éœ€è¦åœ¨ Pine Script ä¸­åŠ å…¥ `alert_message` ç¨‹å¼ç¢¼

**æ–°æ–¹å¼ï¼š** ç›´æ¥åœ¨ TradingView Alert è¨Šæ¯ä¸­ä½¿ç”¨ä½”ä½ç¬¦ï¼Œä¸æ”¹ç­–ç•¥

---

## ğŸ“¡ TradingView Alert è¨­å®š

### **æ­¥é©Ÿ 1ï¼šå»ºç«‹è­¦å ±**

1. é»æ“Šåœ–è¡¨å³ä¸Šè§’ã€Œâ°ã€åœ–ç¤º
2. é¸æ“‡ã€Œå»ºç«‹è­¦å ±ã€

### **æ­¥é©Ÿ 2ï¼šè¨­å®šè§¸ç™¼æ¢ä»¶**

æ ¹æ“šæ‚¨çš„éœ€æ±‚é¸æ“‡ï¼š

**é¸é … Aï¼šåƒ¹æ ¼ç©¿è¶Š**
- æ¢ä»¶ï¼šã€ŒCrossingã€
- è¨­å®šï¼šåƒ¹æ ¼ç©¿è¶Šç§»å‹•å¹³å‡ç·šã€æ”¯æ’/å£“åŠ›ä½ç­‰

**é¸é … Bï¼šæŒ‡æ¨™è§¸ç™¼**
- æ¢ä»¶ï¼šé¸æ“‡æ‚¨çš„æŒ‡æ¨™
- è¨­å®šï¼šæŒ‡æ¨™é”åˆ°ç‰¹å®šæ¢ä»¶

**é¸é … Cï¼šç­–ç•¥è¨‚å–®**
- æ¢ä»¶ï¼šé¸æ“‡æ‚¨çš„ç­–ç•¥åç¨±
- é¸é …ï¼šã€ŒOrder fills onlyã€

### **æ­¥é©Ÿ 3ï¼šè¨­å®š Webhook**

**Webhook URLï¼š**
```
https://your-api.azurewebsites.net/signal/simple
```

âš ï¸ **æ³¨æ„ï¼š** ä½¿ç”¨ `/signal/simple` endpointï¼ˆæ¥µç°¡ç‰ˆï¼‰

### **æ­¥é©Ÿ 4ï¼šè¨Šæ¯è¨­å®š**

æ ¹æ“šä¸åŒå ´æ™¯é¸æ“‡å°æ‡‰çš„è¨Šæ¯æ ¼å¼ï¼š

---

## ğŸ“ è¨Šæ¯æ ¼å¼ç¯„ä¾‹

### **æ ¼å¼ 1ï¼šåšå¤šé€²å ´**

```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{low}},
  "note": "Buy"
}
```

### **æ ¼å¼ 2ï¼šåšå¤šå‡ºå ´**

```json
{
  "strategy": "TXF_vivi",
  "action": "exit",
  "side": "sell",
  "quantity": 1,
  "price": {{close}},
  "note": "Sell"
}
```

### **æ ¼å¼ 3ï¼šåšç©ºé€²å ´**

```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "sell",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{high}},
  "note": "Short"
}
```

### **æ ¼å¼ 4ï¼šåšç©ºå‡ºå ´**

```json
{
  "strategy": "TXF_vivi",
  "action": "exit",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "note": "Cover"
}
```

---

## ğŸ”‘ æ¬„ä½èªªæ˜

### **å¿…å¡«æ¬„ä½**

| æ¬„ä½ | èªªæ˜ | å¯é¸å€¼ |
|------|------|--------|
| `strategy` | ç­–ç•¥åç¨± | ç³»çµ±ä¸­è¨­å®šçš„ç­–ç•¥åç¨± |
| `action` | å‹•ä½œé¡å‹ | `"entry"` (é€²å ´) / `"exit"` (å‡ºå ´) |
| `side` | äº¤æ˜“æ–¹å‘ | `"buy"` (è²·å…¥) / `"sell"` (è³£å‡º) |

### **é¸å¡«æ¬„ä½**

| æ¬„ä½ | èªªæ˜ | é è¨­å€¼ | ç¯„ä¾‹ |
|------|------|--------|------|
| `quantity` | è¨Šè™Ÿæ•¸é‡ | `1` | `1`, `2`, `3` |
| `price` | é€²å ´/å‡ºå ´åƒ¹æ ¼ | `null` | `{{close}}`, `21500` |
| `stop_loss` | æ­¢æåƒ¹æ ¼ | `null` | `{{low}}`, `21400` |
| `take_profit` | æ­¢ç›ˆåƒ¹æ ¼ | `null` | `{{high}}`, `21600` |
| `note` | å‚™è¨» | `null` | `"Buy"`, `"Exit"` |

---

## ğŸ“Š TradingView ä½”ä½ç¬¦é€ŸæŸ¥

### **åƒ¹æ ¼ç›¸é—œ**

| ä½”ä½ç¬¦ | èªªæ˜ | ç”¨é€” |
|--------|------|------|
| `{{close}}` | æ”¶ç›¤åƒ¹ | é€²å ´åƒ¹æ ¼ |
| `{{open}}` | é–‹ç›¤åƒ¹ | - |
| `{{high}}` | æœ€é«˜åƒ¹ | åšç©ºæ­¢æ |
| `{{low}}` | æœ€ä½åƒ¹ | åšå¤šæ­¢æ |

### **æ™‚é–“ç›¸é—œ**

| ä½”ä½ç¬¦ | èªªæ˜ |
|--------|------|
| `{{time}}` | Kæ£’æ™‚é–“ |
| `{{timenow}}` | ç•¶å‰æ™‚é–“ |

### **å…¶ä»–**

| ä½”ä½ç¬¦ | èªªæ˜ |
|--------|------|
| `{{ticker}}` | å•†å“ä»£ç¢¼ |
| `{{interval}}` | Kç·šé€±æœŸ |
| `{{volume}}` | æˆäº¤é‡ |

---

## ğŸ¬ å®Œæ•´è¨­å®šç¯„ä¾‹

### **å ´æ™¯ï¼šåƒ¹æ ¼çªç ´ç§»å‹•å¹³å‡ç·šåšå¤š**

#### **Alert æ¢ä»¶ï¼š**
- æ¢ä»¶ï¼šã€ŒCrossingã€
- å€¼ 1ï¼š`Close`
- å€¼ 2ï¼š`MA(20)` (æ‚¨çš„ç§»å‹•å¹³å‡ç·š)
- æ–¹å‘ï¼šã€ŒCrossing Upã€

#### **Webhook è¨Šæ¯ï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{low}},
  "note": "MA_Break"
}
```

#### **å¯¦éš›è§¸ç™¼æ™‚ç™¼é€ï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": 21500,
  "stop_loss": 21450,
  "note": "MA_Break"
}
```

---

### **å ´æ™¯ï¼šåƒ¹æ ¼è·Œç ´ç§»å‹•å¹³å‡ç·šå‡ºå ´**

#### **Alert æ¢ä»¶ï¼š**
- æ¢ä»¶ï¼šã€ŒCrossingã€
- å€¼ 1ï¼š`Close`
- å€¼ 2ï¼š`MA(20)`
- æ–¹å‘ï¼šã€ŒCrossing Downã€

#### **Webhook è¨Šæ¯ï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "exit",
  "side": "sell",
  "quantity": 1,
  "price": {{close}},
  "note": "MA_Exit"
}
```

---

## ğŸ”„ å‹•ä½œèˆ‡æ–¹å‘å°æ‡‰é—œä¿‚

### **åšå¤šäº¤æ˜“æµç¨‹**

| å‹•ä½œ | æ–¹å‘ | èªªæ˜ |
|------|------|------|
| `entry` + `buy` | åšå¤šé€²å ´ | è²·å…¥å»ºç«‹å¤šå€‰ |
| `exit` + `sell` | åšå¤šå‡ºå ´ | è³£å‡ºå¹³å€‰å¤šå€‰ |

### **åšç©ºäº¤æ˜“æµç¨‹**

| å‹•ä½œ | æ–¹å‘ | èªªæ˜ |
|------|------|------|
| `entry` + `sell` | åšç©ºé€²å ´ | è³£å‡ºå»ºç«‹ç©ºå€‰ |
| `exit` + `buy` | åšç©ºå‡ºå ´ | è²·å…¥å¹³å€‰ç©ºå€‰ |

---

## ğŸ“‹ å¿«é€Ÿé…ç½®æ¨¡æ¿

### **æ¨¡æ¿ 1ï¼šç°¡å–®è²·è³£ï¼ˆåªè¦åƒ¹æ ¼ï¼‰**

```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}}
}
```

### **æ¨¡æ¿ 2ï¼šå¸¶æ­¢æçš„é€²å ´**

```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{low}}
}
```

### **æ¨¡æ¿ 3ï¼šå¸¶æ­¢ææ­¢ç›ˆçš„é€²å ´**

```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{low}},
  "take_profit": {{high}}
}
```

### **æ¨¡æ¿ 4ï¼šå¸‚åƒ¹å–®ï¼ˆä¸æŒ‡å®šåƒ¹æ ¼ï¼‰**

```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1
}
```

ç³»çµ±æœƒæ ¹æ“šç­–ç•¥è¨­å®šè‡ªå‹•ä½¿ç”¨å¸‚åƒ¹å–®ã€‚

---

## ğŸ§ª æ¸¬è©¦æ­¥é©Ÿ

### **æ­¥é©Ÿ 1ï¼šæ¸¬è©¦ API**

```bash
curl -X POST https://your-api.azurewebsites.net/signal/simple \
  -H "Content-Type: application/json" \
  -d '{
    "strategy": "TXF_vivi",
    "action": "entry",
    "side": "buy",
    "quantity": 1,
    "price": 21500,
    "stop_loss": 21450
  }'
```

### **æ­¥é©Ÿ 2ï¼šå»ºç«‹æ¸¬è©¦ Alert**

1. åœ¨ TradingView å»ºç«‹ä¸€å€‹ç°¡å–®çš„åƒ¹æ ¼è­¦å ±
2. è¨­å®š Webhook URL å’Œè¨Šæ¯ï¼ˆä½¿ç”¨ä¸Šè¿°æ¨¡æ¿ï¼‰
3. æ‰‹å‹•è§¸ç™¼æ¸¬è©¦
4. æª¢æŸ¥ API æ—¥èªŒç¢ºèªæ”¶åˆ°è¨Šè™Ÿ

### **æ­¥é©Ÿ 3ï¼šæŸ¥çœ‹è¨Šè™Ÿè¨˜éŒ„**

```bash
curl https://your-api.azurewebsites.net/signals?limit=5
```

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### **æŠ€å·§ 1ï¼šä½¿ç”¨ä¸åŒçš„ note å€åˆ†è¨Šè™Ÿä¾†æº**

**è²·å…¥è¨Šè™Ÿï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "note": "Buy_MA"
}
```

**è³£å‡ºè¨Šè™Ÿï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "sell",
  "quantity": 1,
  "price": {{close}},
  "note": "Sell_RSI"
}
```

---

### **æŠ€å·§ 2ï¼šå‹•æ…‹æ­¢æï¼ˆä½¿ç”¨ç•¶å‰ K æ£’çš„é«˜ä½é»ï¼‰**

**åšå¤šé€²å ´ï¼ˆæ­¢æè¨­åœ¨ä½é»ï¼‰ï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{low}}
}
```

**åšç©ºé€²å ´ï¼ˆæ­¢æè¨­åœ¨é«˜é»ï¼‰ï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "sell",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{high}}
}
```

---

### **æŠ€å·§ 3ï¼šå¤šå€‹ Alert çµ„åˆä½¿ç”¨**

**Alert 1ï¼šé€²å ´è¨Šè™Ÿ**
- æ¢ä»¶ï¼šåƒ¹æ ¼çªç ´
- è¨Šæ¯ï¼š`{"strategy":"TXF_vivi","action":"entry","side":"buy",...}`

**Alert 2ï¼šå‡ºå ´è¨Šè™Ÿ**
- æ¢ä»¶ï¼šåƒ¹æ ¼è·Œç ´
- è¨Šæ¯ï¼š`{"strategy":"TXF_vivi","action":"exit","side":"sell",...}`

**Alert 3ï¼šæ­¢æè¨Šè™Ÿ**
- æ¢ä»¶ï¼šåƒ¹æ ¼è·Œç ´æ”¯æ’
- è¨Šæ¯ï¼š`{"strategy":"TXF_vivi","action":"exit","side":"sell","note":"StopLoss"}`

---

## âš ï¸ å¸¸è¦‹éŒ¯èª¤

### **éŒ¯èª¤ 1ï¼šä½”ä½ç¬¦åŠ å¼•è™Ÿ**

âŒ **éŒ¯èª¤ï¼š**
```json
{
  "price": "{{close}}"
}
```

âœ… **æ­£ç¢ºï¼š**
```json
{
  "price": {{close}}
}
```

---

### **éŒ¯èª¤ 2ï¼šaction å’Œ side ä¸åŒ¹é…**

âŒ **éŒ¯èª¤çµ„åˆï¼š**
```json
{
  "action": "entry",
  "side": "sell"  // é€™æ˜¯åšç©ºé€²å ´ï¼Œä¸æ˜¯éŒ¯èª¤ï¼Œä½†è¦ç¢ºèªæ˜¯å¦ç‚ºæ‚¨çš„æ„åœ–
}
```

**æ­£ç¢ºç†è§£ï¼š**
- `entry` + `buy` = åšå¤šé€²å ´ âœ…
- `entry` + `sell` = åšç©ºé€²å ´ âœ…
- `exit` + `sell` = åšå¤šå‡ºå ´ âœ…
- `exit` + `buy` = åšç©ºå‡ºå ´ âœ…

---

### **éŒ¯èª¤ 3ï¼šç­–ç•¥åç¨±ä¸å­˜åœ¨**

ç¢ºä¿è¨Šæ¯ä¸­çš„ `strategy` åç¨±èˆ‡ç³»çµ±ä¸­è¨­å®šçš„ç­–ç•¥åç¨±ä¸€è‡´ï¼š

```bash
# æª¢æŸ¥ç¾æœ‰ç­–ç•¥
curl https://your-api.azurewebsites.net/strategies
```

---

## ğŸ“ˆ é€²éšæ‡‰ç”¨

### **æ‡‰ç”¨ 1ï¼šæ ¹æ“šæ™‚é–“æ®µè¨­å®šä¸åŒç­–ç•¥**

**æ—¥ç›¤ Alertï¼š**
```json
{
  "strategy": "TXF_day",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}}
}
```

**å¤œç›¤ Alertï¼š**
```json
{
  "strategy": "TXF_night",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}}
}
```

---

### **æ‡‰ç”¨ 2ï¼šæ ¹æ“šæ³¢å‹•åº¦èª¿æ•´æ­¢æ**

**é«˜æ³¢å‹•ï¼ˆä½¿ç”¨æ›´å¯¬çš„æ­¢æï¼‰ï¼š**
```json
{
  "strategy": "TXF_vivi",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{low}}
}
```

**ä½æ³¢å‹•ï¼š**
```json
{
  "strategy": "TXF_vivi_tight",
  "action": "entry",
  "side": "buy",
  "quantity": 1,
  "price": {{close}},
  "stop_loss": {{close}}
}
```

---

## ğŸ‰ å„ªå‹¢ç¸½çµ

âœ… **å®Œå…¨ä¸éœ€è¦ä¿®æ”¹ Pine Script**
âœ… **åœ¨ TradingView ä»‹é¢ç›´æ¥è¨­å®š**
âœ… **æ”¯æ´æ‰€æœ‰ TradingView ä½”ä½ç¬¦**
âœ… **å¤šå€‹ Alert éˆæ´»çµ„åˆ**
âœ… **æ˜“æ–¼æ¸¬è©¦å’Œèª¿æ•´**
âœ… **é©åˆéç¨‹å¼è¨­è¨ˆå¸«ä½¿ç”¨**

---

## ğŸ“ éœ€è¦å”åŠ©ï¼Ÿ

- æŸ¥çœ‹è¨Šè™Ÿæ­·å²ï¼š`GET /signals`
- æŸ¥çœ‹ç­–ç•¥è¨­å®šï¼š`GET /strategies`
- API å¥åº·æª¢æŸ¥ï¼š`GET /health`

---

**æœ€å¾Œæ›´æ–°ï¼š** 2026-02-09  
**ç‰ˆæœ¬ï¼š** 2.1 (ä½”ä½ç¬¦ç‰ˆ)
